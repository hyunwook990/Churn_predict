# 🧝🏻 소환사들은 왜 협곡을 떠나는가?
## 👤팀원 소개

<table align="center">
  <thead>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/ad0b030a-14bd-4c37-a574-c50f9cbdf8ac" width=200 alt="keun"/><br />
      <a href='https://github.com/REROUN'>이근</a><br />
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/da04be45-5246-4bcb-8846-d9fd30ba45de" width=200 alt="hyunwook"/><br />
      <a href='https://github.com/hyunwook990'>정현욱</a><br/>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/44a27fe7-889c-48f3-a00c-a0d08f02b88c" width=200 alt="yugyeong"/><br />
      <a href='https://github.com/yugyeongh'>현유경</a><br />
    </td>
  </thead>
</table>

# 프로젝트 개요
## ⭐프로젝트명
- 리그 오브 레전드 유저들의 이탈률 예측

<br/>

## 🌳프로젝트 소개
- **리그 오브 레전드(League of Legends, LoL)란** <br/>
![image](https://github.com/user-attachments/assets/943d1e95-ea9f-487c-8ca2-fd5aa94020a8)
  > 👉🏻 Riot Games에서 개발한 온라인 멀티플레이어 배틀 아레나 게임<br/>
  > 👉🏻 전략적 사고, 팀워크, 실력 등이 중요한 요소 <br/>
  > 👉🏻 전 세계적으로 매우 인기가 높은 e스포츠

<br/>

### 💡 주제 선정 이유 <br/>
- **e스포츠의 큰 영향력** <br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/6e01e450-f6f2-4465-87da-41e0e1547466' width=500></img> <br/>
  <img src='https://github.com/user-attachments/assets/1a9c977a-b36b-43a5-b481-583285b2462d' width=500></img> <br/>
  <img src='https://github.com/user-attachments/assets/72961b32-b4a8-4029-8fb4-8212b7af39cf' width=500></img> <br/>
</p>

  - **긍적적인 경제적 영향력** <br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/46b40477-516a-4b55-8920-af1b4a5fe648' width=500></img> <br/>
  <img src='https://github.com/user-attachments/assets/cc501821-9a76-473d-815e-cd941afb7acc' width=500></img> <br/>
</p>

<br/>

## 🚨문제점

### 1) 10년 이상 인기를 얻은 게임으로 인한 높은 신규 유입 장벽
<p align="center">
  <img src='https://github.com/user-attachments/assets/5adfc638-8f26-4c81-8d3e-2c772b2b6cbf' width=500></img> <br/>
</p>
<br/>

### 2) 사이버 폭력 문제
<p align="center">
  <img src='https://github.com/user-attachments/assets/f963c0f8-67af-4116-9e31-aae6ab347a47' width=500></img> <br/>
</p>
<br/>

### 3) 점차 기존 유저가 선호하지 않는 스킨 디자인으로 출시
- 기존 스킨<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/e63bfe6c-0af9-4a0b-aa8f-2dcd0f245d95' width=500></img> <br/>
</p>

- 변경 후 스킨<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/10279864-0749-4aea-abc7-8ecbee78e4a8' width=500></img> <br/>
</p>
<br/>

## ✅ 프로젝트 필요성
- e스포츠 산업의 지속 성장을 위해 유저 이탈률 관리가 필수적
- 유저 이탈은 게임 생태계와 경제적 영향력에 부정적 영향을 미칠 수 있어 이를 예측하고 대응하는 전략이 필요
  
<br/><br/>

## 🤖 프로젝트 목표
- 유저의 상세 데이터를 활용하여 이탈률을 분석하여 도출된 맞춤형 대응책을 통해 유저 충성도를 높이고 e스포츠 시장의 경쟁력을 유지하는 것을 목표로 함

<br/><br/>

## 👓 예상한 유저의 이탈 이유
- 신규 유저에게는 높은 진입장벽
  - 서로 다른 4개의 스킬을 가진 170개의 챔피언 수 | 정형화된 게임 운영 방식 | 복잡한 아이템 구조
  - 기존 유저들의 자유로운 부계정 생성으로 인한 게임 난이도 증가
- 스킨, 인터페이스의 변경

<br/><br/>

# 기술스택
<p align="center">
  <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
  <img src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=vscode&logoColor=white">
  <img src="https://img.shields.io/badge/numpy-%235865F2.svg?style=for-the-badge&logo=numpy&logoColor=white">
</p>
<p align="center">
  <img src="https://img.shields.io/badge/pandas-%23000000.svg?style=for-the-badge&logo=pandas&logoColor=white">
  <img src="https://img.shields.io/badge/Matplotlib-3776AB?style=for-the-badge&logo=Matplotlib&logoColor=white">
  <img src="https://img.shields.io/badge/scikit--learn-F7931E?style=for-the-badge&logo=scikit-learn&logoColor=white">
  <img src="https://img.shields.io/badge/PyTorch-EE4C2C?style=for-the-badge&logo=pytorch&logoColor=white">
</p>
<p align="center">
  <img src='https://img.shields.io/badge/streamlit%20-%23FF0000.svg?style=for-the-badge&logo=streamlit&logoColor=white'>
  <img src="https://img.shields.io/badge/Graphviz-2E6DB4?style=for-the-badge&logo=graphviz&logoColor=white">
</p>

<br/><br/>

# RIOT API 데이터 수집
<p align="center">
  <img src="https://github.com/user-attachments/assets/f66104b4-25b0-4866-82dc-83d939b7cc3f" width=700>
  <h5 align="center">리그 오브 레전드(League of Legends)의 데이터에 접근할 수 있게 해주는 API 사용</h5>
</p>

<br/>

## 🌍 총 데이터 수
- **User 데이터 수**: 2,319,285명
  - User 데이터에서 랜덤으로 10%만 추출해 사용
  - 실제 사용한 User 데이터 수: 231,930명
- **Champion 데이터 수**: 695,703개

<br/>

## 💻 사용한 API

### 1) LEAGUE-EXP-V4
- `/lol/league-exp/v4/entries/{queue}/{tier}/{division}?page={page}&api_key={api_key}`
- User의 상세 데이터 수집

#### 💿LeagueEntryDTO
<p align="center">
  <img src="https://github.com/user-attachments/assets/1e68b0e3-af24-43df-8465-53bdefc2f067" width=600>
</p>

<br/>

### 2) SUMMONER-V4
- `/lol/summoner/v4/summoners/by-puuid/{puuid}?api_key={api_key}`
- User의 상세 데이터 수집

#### 💿SummonerDTO 
<p align="center">
  <img src="https://github.com/user-attachments/assets/2c121a95-61be-4bd6-8d9d-d95d4b755876" width=600>
</p>

<br/>

### 3) CHAMPION-MASTERY-V4
- `/lol/champion-mastery/v4/champion-masteries/by-puuid/{encryptedPUUID}/top`
- User가 가장 많이 사용하는 상위 3개의 champion 데이터 수집

#### 💿ChampionMasteryDto
<p align="center">
  <img src="https://github.com/user-attachments/assets/f6a68dea-e7ef-42da-80bb-9c74f83e6916" width=600>
</p>

#### 💿NextSeasonMilestonesDto 
<p align="center">
  <img src="https://github.com/user-attachments/assets/198fec4a-891a-4993-9aed-9bb5076bd1a3" width=600>
</p>

#### 💿RewardConfigDto
<p align="center">
  <img src="https://github.com/user-attachments/assets/41e0f5e8-4998-409c-87fa-616df2cb6c4f" width=600>
</p>

<br/><br/>

# 데이터 전처리 결과서 (EDA)
## 👉🏻 데이터 확인하기
### 1) Tier별 유저 분포 확인
<p align="center">
  <img src='https://github.com/user-attachments/assets/504116ae-5750-48f0-a12d-cd1a5b02ec8a' width=600>
</p>
<p align="center"><b>🔺원본 데이터 시각화</b></p>
<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/d19b87c5-a8a4-49c6-94f9-6d858abf3a43' width=600>
</p>
<p align="center"><b>🔺원본 데이터에서 10% 추출한 데이터 시각화</b></p>
<br/>

### 2) 결측값 확인
> 방법: isna() 사용
<p align="center">
  <img src='https://github.com/user-attachments/assets/9098b8c0-fcce-45a7-8260-bd3b644be0a1'>
</p>
<br/>

### 3) 중복값 제거
> 방법: drop_duplicates() 사용
<p align="center">
  <table border="0">
    <tr>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/766fabe1-aa69-4407-93e4-c1e7ce7d195b' width=500><br>
        <b>🔺중복값 제거 전</b>
      </td>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/afa4faa5-8b14-46f2-b4f5-a08176f29239' width=500><br>
        <b>🔺중복값 제거 후</b>
      </td>
    </tr>
  </table>
</p>
<br/>

## 👉🏻 데이터 정제하기
### 1) column 정제
#### 필요없는 column 제거
> 방법: drop() 사용
<p align="center>
  <img src='https://github.com/user-attachments/assets/af78fe6c-90bd-41e5-90e6-f9fc97e6889c'>
</p>

> **💡 해당 컬럼을 제거한 이유** <br/>
> `중복값 제거`: id, 비슷한 성격을 가진 컬럼 <br/>
> `관련성 없는 데이터 제거`: 게임 내에서 얻는 아이템 관련 컬럼 <br/>
> `불균형 데이터 제거`: inactive 컬럼 <br/>

<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/afd4e906-e21a-4ea8-b26f-a51c95aca821'>
</p>
<p align="center"><b>🔺필요없는 column 제거 전</b></p>
<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/dd94aeb3-637f-46b5-81bc-f6cb04c8d2ad'>
</p>
<p align="center"><b>🔺필요없는 column 제거 후</b></p>


<br/>

#### 필요한 column 추가 - churn, winRate 컬럼
<p align="center">
  <img src='https://github.com/user-attachments/assets/2c08441a-6a4d-4ec5-8524-e623a182ba23' width=700>
</p>
<p align="center"><b>기존에 있던 <code>revisionDate</code> 컬럼을 사용해 마지막 접속일 계산</b></p>
  <br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/764dd191-dd60-479e-9a79-af4bb39a79f2' width=700>
</p>
<p align="center"><b>기존에 있던 <code>wins</code>, <code>losses</code> 컬럼을 사용해 승률 계산</b></p>

<br/>

### 2) Label Encoding
> `tier`: object 형 -> 0 ~ 10까지 범주형으로 변경 <br/>
> `rank`: object 형 -> 0 ~ 3까지 범주형으로 변경 <br/>
> `veteran`: bool 형 -> 0 or 1로 변경 <br/>
> `freshBlood`: bool 형 -> 0 or 1로 변경 <br/>
> `hotStreak`: bool 형 -> 0 or 1로 변경<br/>
<p align="center">
  <img src='https://github.com/user-attachments/assets/6236867d-f31d-4075-bc35-1af6134a9c67'>
</p>


### 3) 전체 데이터 구조
<table>
  <thead>
    <tr>
      <th>컬럼명</th>
      <th>설명</th>
      <th>데이터 타입</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tier</code></td>
      <td>player의 티어</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>rank</code></td>
      <td>티어 내의 세부 구분(I,II,III,IV)</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>winRate</code></td>
      <td>승률</td>
      <td>float</td>
    </tr>
    <tr>
      <td><code>veteran</code></td>
      <td>티어가 꾸준하게 변동되지 않고, 2회 이상 같은 랭크에 있는지 여부</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>freshBlood</code></td>
      <td>랭크의 신규 입문자</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>hotStreak</code></td>
      <td>연승 여부</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>revisionDate</code></td>
      <td>player가 마지막 접속한 날짜 (UTC 기준 millisecond)</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>summonerLevel</code></td>
      <td>player의 레벨</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>championId</code></td>
      <td>champion의 id</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>championLevel</code></td>
      <td>player가 가진 champion의 레벨</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>championPoints</code></td>
      <td>player가 가진 champion의 숙련도</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>lastPlayTime</code></td>
      <td>player가 해당 champion으로 활동한 마지막 시간</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>championSeasonMilestone</code></td>
      <td>champion이 시즌 내에서 마일스톤을 얼마나 달성했는지</td>
      <td>integer</td>
    </tr>
    <tr>
      <td><code>churn</code></td>
      <td>이탈 여부</td>
      <td>integer</td>
    </tr>
  </tbody>
</table>

<br/>

### ✅ Heatmap 확인하기
<p align="center">
  <img src='https://github.com/user-attachments/assets/b61f2d8d-9c28-414e-a96f-d40655e371d8'>
  <b>🔺데이터 샘플링 전 Heatmap</b>
</p>
<br/><br/>

## 👉🏻 데이터 불균형 해소
<p align="center">
  <img src='https://github.com/user-attachments/assets/10a50502-ce47-4b18-bd23-527af7b650cf'>
  <b>🔺데이터 불균형 컬럼 시각화</b>
</p>
<br/>

### 1) Over Sampling
> churn 컬럼 기준 `SMOTE 기법`으로 over sampling하기
<p align="center">
  <table border="0">
    <tr>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/271f7d7b-c417-4143-88c6-12962c220862' width=500><br>
        <b>🔺over sampling 전</b>
      </td>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/c514ccf8-bb2f-4afd-8f47-644afffc3df3' width=500><br>
        <b>🔺over sampling 후</b>
      </td>
    </tr>
  </table>
</p>
<br/>

### 2) Under Sampling
> churn 컬럼 기준 `NearMiss 기법`으로 under sampling하기 - 거리 기반
<p align="center">
  <table border="0">
    <tr>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/29ff299b-2d0b-4b24-8e20-ebede6f39cc2' width=500><br>
        <b>🔺under sampling - NearMiss 전</b>
      </td>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/b9dd0947-990b-40ef-8d33-a220cc8ab913' width=500><br>
        <b>🔺over sampling - NearMiss 후</b>
      </td>
    </tr>
  </table>
</p>
<br/>

> churn 컬럼 기준 `TomekLinks 기법`으로 under sampling하기 - 유사도 기반
<p align="center">
  <table border="0">
    <tr>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/29ff299b-2d0b-4b24-8e20-ebede6f39cc2' width=500><br>
        <b>🔺under sampling - TomekLinks 전</b>
      </td>
      <td align="center" style="border:none;">
        <img src='https://github.com/user-attachments/assets/500e6ee1-6265-4a28-b830-848f251d411d' width=500><br>
        <b>🔺over sampling - TomekLinks 후</b>
      </td>
    </tr>
  </table>
</p>
<br/>

> churn, freshBlood, hotStreak 컬럼 기준 `RandomUnderSampler 기법`으로 under sampling하기
<p align="center">
  <table border="0">
    <tbody>
      <tr>  
        <td align="center" style="border:none;">
          <img src='https://github.com/user-attachments/assets/19fa089a-dfbc-4140-a34e-d56a56b531ab' width=500>
        </td>
        <td align="center" style="border:none;">
          <img src='https://github.com/user-attachments/assets/bbb4f820-df81-44a4-aea5-60f1c133e901' width=500>
        </td>
      </tr>
      <tr>
        <td>
          <b>🔺under sampling - RandomUnderSampler 전</b>
        </td>
        <td>
          <b>🔺under sampling - RandomUnderSampler 후</b>
        </td>
      </tr>
    </tbody>
    <tr>
  </table>
</p>
<br/>

### ✅ Heatmap 확인하기
<p align="center">
  <img src='https://github.com/user-attachments/assets/e2417f71-492b-4951-a8d7-54577adc78fb'>
  <b>🔺데이터 샘플링 후 Heatmap</b>
</p>
<br/><br/>

<br/><br/>

# 인공지능 학습 과정
**🤖 KNN & Logistic Regression** 
> 사용 이유: 선형 분류 모델의 성능 파악을 위함

<table>
  <thead>
    <td>
      <img src='https://github.com/user-attachments/assets/7c2eb7fb-0a2e-4aa2-ad4e-b5afce20cf05'>
    </td>
    <td>
      <img src='https://github.com/user-attachments/assets/865fa7ee-b039-4dff-a3e1-654d986b2b89'>
    </td>
  </thead>
  <tbody>
    <tr>
      <td>
        <img src='https://github.com/user-attachments/assets/31adaa5f-8c0e-45a5-9f2f-986cbd48bfa3'>
      </td>
      <td>
        <img src='https://github.com/user-attachments/assets/49353253-cae5-473e-8d10-502117b68b0e'>
      </td>
    </tr>
    <tr>
      <td>
        <img src='https://github.com/user-attachments/assets/5dea3bf8-86b9-4628-aa72-58ef5e792f97'>
      </td>
      <td>
        <img src='https://github.com/user-attachments/assets/b0895b78-a9bf-41a6-8cac-d1dbdac8c9b3'>
      </td>
    </tr>
  </tbody>

</table><br/>

**🤖 SVM**
> 사용 이유: 비선형 분류 모델의 효율적인 학습 여부 파악을 위함 <br/>



A. PCA를 통한 차원 축소(2차원, 3차원)
<p align="center">
  <img src='https://github.com/user-attachments/assets/6d4662c7-a133-46d3-93fe-14ebc28215ec'>
  <img src='https://github.com/user-attachments/assets/6acbc6e6-4f05-4adb-80e1-90e327955ab6'>
</p>
  B. 차원 축소하지 않고, 30%의 데이터만 샘플링했을 경우 정확도
     -> 30%만 샘플링한 이유: 시간 복잡도 증가
<p align="center">
  <img src='https://github.com/user-attachments/assets/deae7a77-2d08-42ee-9321-7f806130b1d8'>
</p>
<br/>

**🤖 Random Forest**
> 사용 이유: 비선형 분류에 강한 앙상블 모델로 churn 컬럼 이외의 컬럼들의 관계성을 학습하기 위함 <br/>



A. 차원 축소하지 않은 데이터의 정확도
<p align="center">
  <img src='https://github.com/user-attachments/assets/365c4bf9-fb50-49c7-b0db-fc4dd6b139a4'>
</p><br/><br/>
B. max_depth=4
<p align="center">
  <img src='https://github.com/user-attachments/assets/c3148a31-0513-49f8-9c4d-336dfc4bcb74'>
</p><br/><br/>
C. 특성 중요도
<p align="center">
  <img src='https://github.com/user-attachments/assets/bf6605a1-0d60-4420-ad22-b46cf2bcdb0a' width=600>
</p><br/><br/>
D. Best Hyper Parameters
<p align="center">
  <img src='https://github.com/user-attachments/assets/b54a0f6d-19ec-4d64-b1e8-56af4bcf1a4f'>
</p><br/><br/>

**🤖 Ensemble**
> 사용 이유: 데이터의 특성상 비선형에 특화되어 있어 여러 머신러닝 모델을 결합해 강한 학습기를 생성하기 위함
<table>
  <thead>
    <td>
      <p align="center">
        <img src='https://github.com/user-attachments/assets/5a6d8d98-0607-4776-830c-ff87c3714692'>
      </p>
    </td>
    <td>
      <p align="center">
        <img src='https://github.com/user-attachments/assets/922b3eab-d7f1-437d-b0f4-a5e4cb4327a2'>
      </p>
    </td>
  </thead>
  <tbody>
    <td><p align="center"><b>Hard Voting - KNN, Logistic Regression, Decision Tree</b></p></td>
    <td><p align="center"><b>Soft Voting - GradientBoostingClasifier, CatBoostClasifier, RandomForestClasifier, LGBMClasifier</b></p></td>
  </tbody>
</table><br/>


**🤖 Deep Learning**
> 사용 이유: 활성화 함수를 통해 비선형성 데이터를 가장 최적으로 학습하기 위함
<p align="center">
  <img src='https://github.com/user-attachments/assets/7d77a759-737e-424a-a7c5-3439c0a8c5df'>
</p>
<br/><br/>

# 인공지능 평가
- Ensemble 평가지표
<p align="center">
  <img src='https://github.com/user-attachments/assets/cb12e866-62e5-4060-82ed-389bc33a80b5' width=800>
</p><br/>

- Deep Learning 평가지표
<table>
  <thead>
    <p align="center">
      <td>
        <img src='https://github.com/user-attachments/assets/481ebf50-16f3-4456-9e86-6b2e5dbd9152'>
      </td>
      <td>
        <img src='https://github.com/user-attachments/assets/c4d545ed-a5c2-41f9-9e3a-4f280d880eca'>
      </td>
    </p>
  </thead>
</table>


<br/><br/>

# 시연 페이지 및 모델
<p align="center">
  <img src='https://github.com/user-attachments/assets/cc4137fd-4303-4fab-a18c-f33e873dfe71'>
</p>
<a href="https://ohgiraffers.notion.site/4Team-1bb649136c11802b9ecdf95d41890fdb?pvs=4">앙상블 모델</a>

  
<br/><br/>